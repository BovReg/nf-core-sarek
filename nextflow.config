/*
vim: syntax=groovy
-*- mode: groovy;-*-
 * -------------------------------------------------
 * Nextflow config file for CAW project
 * -------------------------------------------------
 * Default config options for all environments.
 * Cluster-specific config options should be saved
 * in the config folder and imported under a profile
 * name here.
 */

manifest {
    homePage = 'http://opensource.scilifelab.se/projects/caw/'
    description = 'Cancer Analysis Workflow'
}

params {
  annotateTools = ''
  annotateVCF = ''
  callName = ''
  contactMail = ''
  help = false
  project = ''
  sample = ''
  sampleDir = ''
  step = 'preprocessing'
  test = false
  tools = ''
  vcflist =''
  verbose = false
  version = false
  genome = 'GRCh38'
}

env {
  NXF_OPTS="-Xms1g -Xmx4g"
}

profiles {
  // the default profile runs the pipeline locally on a single 16-core node
  // on any of the UPPMAX clusters
  standard {
    includeConfig 'configuration/localhost.config'
    includeConfig 'configuration/uppmax-modules.config'
  }
  slurm {
    includeConfig 'configuration/uppmax.config'
    includeConfig 'configuration/uppmax-slurm.config'
    includeConfig 'configuration/uppmax-modules.config'
  }
  docker {
    includeConfig 'configuration/docker.config'
  }
  travis {
    includeConfig 'configuration/travis.config'
    includeConfig 'configuration/docker.config'
  }
}

includeConfig 'configuration/genomes.config'

process.shell = ['/bin/bash', '-euo', 'pipefail']

// Turning on timeline tracking by default
timeline {
  enabled = true
}

// Turning on trace tracking by default
trace {
  enabled = true
  fields = 'process,task_id,hash,name,attempt,status,exit,realtime,%cpu,vmem,rss,submit,start,complete,duration,realtime,rchar,wchar'
}
