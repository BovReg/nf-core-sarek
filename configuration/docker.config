/*
vim: syntax=groovy
-*- mode: groovy;-*-
 * -------------------------------------------------
 * Nextflow config file for CAW project
 * -------------------------------------------------
 * Docker images for every process
 * All images will be pulled automatically
 * -------------------------------------------------
 */

docker {
  enabled = true
  fixOwnership = true
}

repository='maxulysse'
tag='1.2.3'

process {
  $BuildBWAindexes.container          = "${repository}/caw:${tag}"
  $BuildPicardIndex.container         = "${repository}/picard:${tag}"
  $BuildSAMToolsIndex.container       = "${repository}/caw:${tag}"
  $BuildVCFIndex.container            = "${repository}/igvtools:${tag}"
  $ConcatVCF.container                = "${repository}/caw:${tag}"
  $CreateRecalibrationTable.container = "${repository}/gatk:${tag}"
  $IndelRealigner.container           = "${repository}/gatk:${tag}"
  $MapReads.container                 = "${repository}/caw:${tag}"
  $MarkDuplicates.container           = "${repository}/picard:${tag}"
  $MergeBams.container                = "${repository}/caw:${tag}"
  $RealignerTargetCreator.container   = "${repository}/gatk:${tag}"
  $RecalibrateBam.container           = "${repository}/gatk:${tag}"
  $RunAlleleCount.container           = "${repository}/runallelecount:${tag}"
  $RunAscat.container                 = "${repository}/r-base:${tag}"
  $RunBamQC.container                 = "${repository}/qualimap:${tag}"
  $RunBcftoolsStats.container         = "${repository}/caw:${tag}"
  $RunConvertAlleleCounts.container   = "${repository}/r-base:${tag}"
  $RunFastQC.container                = "${repository}/fastqc:${tag}"
  $RunFreeBayes.container             = "${repository}/freebayes:${tag}"
  $RunGenotypeGVCFs.container         = "${repository}/gatk:${tag}"
  $RunHaplotypecaller.container       = "${repository}/gatk:${tag}"
  $RunManta.container                 = "${repository}/caw:${tag}"
  $RunMultiQC.container               = "${repository}/multiqc:${tag}"
  $RunMutect1.container               = "${repository}/mutect1:${tag}"
  $RunMutect2.container               = "${repository}/gatk:${tag}"
  $RunSamtoolsStats.container         = "${repository}/caw:${tag}"
  $RunSingleManta.container           = "${repository}/caw:${tag}"
  $RunSingleStrelka.container         = "${repository}/caw:${tag}"
  $RunSnpeff.container = {params.genome == "GRCh38" ? "${repository}/snpeffgrch38:${tag}" : "${repository}/snpeffgrch37:${tag}"}
  $RunStrelka.container               = "${repository}/caw:${tag}"
  $RunVEP.container = {params.genome == "GRCh38" ? "${repository}/vepgrch38:${tag}" : "${repository}/vepgrch37:${tag}"}
}
